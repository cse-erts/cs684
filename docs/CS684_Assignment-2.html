<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Assignment 2 - CS684 Spring 2022</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="Welcome.html">Welcome</a></li><li class="chapter-item "><a href="Installation_instructions.html">Installation Instructions</a></li><li class="chapter-item "><a href="Resources.html">Resources</a></li><li class="chapter-item "><a href="CS684_Labs.html">Labs</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="CS684_Lab-1.html">Lab 1</a></li><li class="chapter-item "><a href="CS684_Lab-2.html">Lab 2</a></li><li class="chapter-item "><a href="CS684_Lab-3.html">Lab 3</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="CS684_Lab-3_SR.html">Search & Rescue</a></li><li class="chapter-item "><a href="CS684_Lab-3_VP.html">Valet Parking</a></li></ol></li><li class="chapter-item "><a href="CS684_Lab-4.html">Lab 4</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="CS684_Lab-4_SR.html">Search & Rescue</a></li><li class="chapter-item "><a href="CS684_Lab-4_VP.html">Valet Parking</a></li></ol></li><li class="chapter-item "><a href="CS684_Lab-5.html">Lab 5</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="CS684_Lab-5_SR.html">Search & Rescue</a></li><li class="chapter-item "><a href="CS684_Lab-5_VP.html">Valet Parking</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="CS684_Assignments.html">Assignments</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="CS684_Assignment-1.html">Assignment 1</a></li><li class="chapter-item expanded "><a href="CS684_Assignment-2.html" class="active">Assignment 2</a></li><li class="chapter-item "><a href="CS684_Assignment-3.html">Assignment 3</a></li><li class="chapter-item "><a href="CS684_Assignment-4.html">Assignment 4</a></li></ol></li><li class="chapter-item "><a href="rulebook1/toc.html">Project-1 Search and Rescue Robot</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rulebook1/theme_description.html">[1] Theme Description</a></li><li class="chapter-item "><a href="rulebook1/arena.html">[2] Arena</a></li><li class="chapter-item "><a href="rulebook1/theme_rules.html">[3] Theme Rules</a></li><li class="chapter-item "><a href="rulebook1/judging_and_scoring_system.html">[4] Judging and Scoring System</a></li></ol></li><li class="chapter-item "><a href="rulebook2/toc.html">Project-2 Valet Parking Robot</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="rulebook2/theme_description.html">[1] Theme Description</a></li><li class="chapter-item "><a href="rulebook2/arena.html">[2] Arena</a></li><li class="chapter-item "><a href="rulebook2/theme_rules.html">[3] Theme Rules</a></li><li class="chapter-item "><a href="rulebook2/judging_and_scoring_system.html">[4] Judging and Scoring System</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">CS684 Spring 2022</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <center><h3 id="cs684-embedded-system-course"><a class="header" href="#cs684-embedded-system-course">CS684: Embedded System Course</a></h3></center>
<center><h4 id="assignment-2-lustreheptagon"><a class="header" href="#assignment-2-lustreheptagon">Assignment 2: Lustre/Heptagon </a></h4></center>
<hr />
<p><strong>Note :</strong> Assignment 2 contains theory questions as well as coding questions. For theory questions, submit your answer in the text file and for coding questions, submit code files (.lus or .ept). Before submitting, refer to the Submission Instructions.</p>
<h4 id="problem-statements"><a class="header" href="#problem-statements">PROBLEM STATEMENTS</a></h4>
<p><strong><code>Q1.</code></strong></p>
<p>Complete the following table giving values of expressions in column 1 for the first 6 cycles. The values of integer flows for the first 5 cycles are given in rows, labelled P and Q.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">Expression\Cycle</th><th style="text-align: center">0</th><th style="text-align: center">1</th><th style="text-align: center">2</th><th style="text-align: center">3</th><th style="text-align: center">4</th><th style="text-align: center">5</th></tr></thead><tbody>
<tr><td style="text-align: center">P</td><td style="text-align: center">2</td><td style="text-align: center">7</td><td style="text-align: center">5</td><td style="text-align: center">1</td><td style="text-align: center">3</td><td style="text-align: center">-</td></tr>
<tr><td style="text-align: center">Q</td><td style="text-align: center">0</td><td style="text-align: center">13</td><td style="text-align: center">6</td><td style="text-align: center">5</td><td style="text-align: center">2</td><td style="text-align: center">-</td></tr>
<tr><td style="text-align: center">pre(P)</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center">Q + 1</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center">P -&gt; Q</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center">P -&gt; (pre(Q)+1)</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
<tr><td style="text-align: center">P fby Q</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr>
</tbody></table>
</div>
<p><strong>Answer format:</strong> Create <code>q1</code> text file. Without using a space, list the values of the expressions for 6 cycles in comma-separated format. Make sure to write each expression's value for the six cycles on a separate line.
For ex. </p>
<pre><code>1,1,1,1,1,1
2,2,2,2,2,2
3,3,3,3,3,3
</code></pre>
<p><strong><code>Q2.</code></strong> </p>
<p>Consider the following Lustre nodes:</p>
<pre><code class="language-code">node foo(P: int) returns (Q, R: int)
var W, Y, Z: int;
let
    Q  =  W* Z;
    W = 0 -&gt; (pre(Z) +1);
     Z = W + Y;
    Y =  sqr(W);
    R = Q + W;
tel
</code></pre>
<pre><code class="language-code">node sqr(A :int) returns (B: int)
let
    B = A*A;
tel
</code></pre>
<p>Is this program causally correct? What is the order in which values of variables Q,R,W,Y,Z are calculated in each cycle?</p>
<p><strong>Answer format:</strong> Create <code>q2</code> text file. Write the answer of the both the question in comma separated format without using a space. 
For ex.</p>
<pre><code>no,yes
Q,R,W,Y,Z
</code></pre>
<p><strong><code>Q3.</code></strong> </p>
<p>Write following lustre codes:</p>
<p><code>3.1:</code> Define a Lustre node returning the following sequence of values.   <code>(Code required)</code> <br />
1, 4, 13, 40, 121, ... </p>
<blockquote>
<p>(Hint: Consider how the difference of two successive terms grows.)</p>
</blockquote>
<blockquote>
<p>Note: In lustre, zero input nodes are not allowed. If your node is properly simulated in heptagon you can submit it. But keep the extension as .lus. </p>
</blockquote>
<p><code>3.2:</code> Complete the definition of following Lustre node   <code>(Code required)</code></p>
<pre><code class="language-code">node gen(req:bool) returns (ack: bool)
... 
</code></pre>
<p>such that ack is true in the current cycle if and only if req has been true for the last 3 cycles (including the current cycle). </p>
<blockquote>
<p>(Hint: First count for how many previous cycles req has been true continuously.)</p>
</blockquote>
<p><strong>Answer format:</strong> For question 3.1 &amp; 3.2, submit .lus file.</p>
<p><strong><code>Q4.</code></strong> </p>
<p>Answer with respect to Heptagon code:</p>
<p><code>4.1:</code> Please describe in English the output produced by the following Heptagon node. </p>
<pre><code class="language-code">node t(x: bool^5) returns (y: bool);
let
    y = fold&lt;&lt;5&gt;&gt;(or)(x, false)
tel
</code></pre>
<p><code>4.2:</code> What happens if you change the equation to 
<code>y = fold&lt;&lt;5&gt;&gt;(or)(x, true)</code>? Describe the output.</p>
<p><code>4.3:</code> Complete the definition of the following Heptagon node with parameter n. <code>(Code required)</code></p>
<pre><code class="language-code">node mutex&lt;&lt;n&gt;&gt;(ack: bool^n) returns (ok: bool)
...
</code></pre>
<p>The node should check for mutual exclusion of ack[i] and ack[j]. That is ok is true provided expression ack[i] and ack[j] is false for all i, j pairs with i not= j.</p>
<p><strong>Answer format:</strong> Create <code>q41 &amp; q42</code> text files. No specific format for these questions. These question will be manually evaluated. And for question 4.3, submit .ept file.</p>
<p><strong><code>Q5.</code></strong> </p>
<p>Study the following Heptagon code for ripple adder.</p>
<pre><code class="language-code">node mxor(x, y: bool) returns (c: bool)
let 
    c = (x and not y) or ((not x) and y);
tel
</code></pre>
<pre><code class="language-code">node fa(x, y, cin: bool) returns (z, cout: bool)
let 
    z = mxor(mxor(cin, x), y); 
    cout = if cin then (x or y) else (x and y); 
tel
</code></pre>
<pre><code class="language-code">node rippleadd&lt;&lt;n:int&gt;&gt;(a: bool^n; b: bool^n) returns (c: bool^n; over: bool)
let
    (c,over) = mapfold&lt;&lt;n&gt;&gt;fa(a, b, false);
tel
</code></pre>
<p>A sample code file with the above code simulating a 4-bit adder is given: <a href="https://drive.google.com/file/d/1N2xKjaIJKYc6iZbB7ErPer2Gkit6nfLI/view" target="_blank">Download File</a>.</p>
<p><code>5.1:</code> Manually compute the output at 0th cycle of rippleadd for  constants a=[0,1,1,0,1,1,1,0] and b=[1,1,0,1,0,1,1,1] given as input to rippleadd&lt;&lt;8&gt;&gt;(a,b). </p>
<p><code>5.2:</code> Using this node rippleadd, define a node counter which counts in binary modulo 64. (It should output unsigned 8 bit binary numbers corresponding to the decimal numbers 0, 1, 2, ..., 63, 0, 1, 2,.... in successive cycles).    <code>(Code required)</code></p>
<p><strong>Answer format:</strong> For question 5.1, create <code>q51</code> text file. Write the answer of the question in comma separated format without using a space (write both values in a single line) &amp; for question 5.2, submit .ept file.</p>
<p><strong><code>Q6.</code></strong> </p>
<p><code>6.1:</code> <strong>(Synchronous Bus Arbiter)</strong> An arbiter arbitrates between multiple requests coming at each cycle and gives acknowledgement to at most one of them. Consider the arbiter circuit below.     <code>(Code required)</code></p>
<center><img src="https://raw.githubusercontent.com/rutujaekatpure/CS684_Labs/main/2020/q6.png"></center>
<p>Each <strong>red box</strong> (denoting a cell) in the left hand side figure is expanded to the <strong>cell</strong> circuit given in the right hand side figure.</p>
<p>Using Heptagon, model each cell as a </p>
<pre><code class="language-code">node cell(req, grantin: bool) returns (ack, grantout: bool)
</code></pre>
<p>Model a 5 cell arbiter as an assembly of 5 cells as shown in the figure. Call this </p>
<pre><code class="language-code">node arbiter(req:bool^5) returns (ack:bool^5)
</code></pre>
<blockquote>
<p>Hint: See the implementation of rippleadd given in the previous question. Extra credit will be given if you can program this as an n cell arbiter with parameter n.</p>
</blockquote>
<p>Define a suitable display node to show the output. Simulate the arbiter using the tool Heptagon and check its functioning. Submit a screenshot of sample output using the sim2chro display.</p>
<p><code>6.2:</code> Which of the following properties does this arbiter have?</p>
<p>a. Mutual exclusion of ack[i], ack[j] for i not= j.<br />
b. No spurious ack, i.e. ack[i] =&gt; req[i] <br />
c. No lost cycles, i.e. in any cycle, if there is at least 1 true request, the arbiter should have at least one true ack.</p>
<p><strong>Answer format:</strong> For question 6.1, submit .ept file. For question 6.2, create <code>q62</code> text file. Write the options in comma separated format without using a space. </p>
<p><strong><code>Q7.</code></strong> </p>
<p>A monitor node for a property S takes as input a set of flows to observe (e.g. p, q: bool). It outputs a single boolean flow ok. The idea is that at every clock cycle, ok is true if the property S holds for the past sequence of inputs (including the current cycle). For example:
Property S: “p is continuously true in the past” has the monitor node</p>
<pre><code class="language-code">node smonitor(p: bool) returns (ok: bool)
let
    ok = p -&gt; (pre(ok) and p); 
tel
</code></pre>
<p>Answer the following</p>
<p><code>7.1:</code> Give the output of the above <strong>smonitor</strong> node for the input flow p = true true true false true false  true true <br />
<code>7.2:</code> Give a monitor for the following property: “p is continuously true in the past AND q has occured at least once in the past.”     <code>(Code required)</code> <br />
<code>7.3:</code> Give a monitor node for the following property: Assume that a, b, c are boolean flows. “Everytime a occurs, c will remain continuously true from then on until a b occurs”. Specify additional assumptions that you make in your design (E.g. what happens if a and b occur simultaneously).     <code>(Code required)</code> <br />
<code>7.4:</code> Give a monitor node for the following property: Assume that req and ack are boolean flows. “If req has been true for the last 3 cycles (including the current cycle) then ack must be true in the current cycle.”     <code>(Code required)</code></p>
<p><strong>Answer format:</strong> For question 7.1, create <code>q71</code> text file. Write the answer the question in comma separated format without using a space &amp; for question 7.2, 7.3 &amp; 7.4, submit .ept file.</p>
<blockquote>
<p>Clarification: req and ack are both input boolean flows. ok is the output flow. ok is true if the property is observed/followed.</p>
</blockquote>
<h4 id="submission-instructions"><a class="header" href="#submission-instructions">Submission Instructions</a></h4>
<ul>
<li>Create a folder named <strong><code>&lt;RollNo&gt;_assignment2</code></strong>.</li>
<li>Copy and paste  all the files which has to be submitted inside the newly created folder according to the structure as shown below: </li>
</ul>
<pre><code>&lt;RollNo&gt;_assignment2
│  
└─── q1 (text file)
│  
└─── q2 (text file)
│
└─── q3
│   │   q31.lus
│   │   q32.lus
│
└─── q4
│   │   q41 (text file)
│   │   q42 (text file)
│   │   q43.ept
│
└─── q5
│   │   q51 (text file)
│   │   q52.ept
│   
└─── q6
│   │   q61.ept
|   |   q61_op.jpg
│   │   q62 (text file)
│   
└─── q7
    │   q71 (text file)
    │   q72.ept
    │   q73.ept
    │   q74.ept

</code></pre>
<p><strong>Note :</strong> Folder name and file name should be same as mentioned in the above structure.</p>
<ul>
<li>Compress the folder in a <strong><code>.tar.gz</code></strong> file and submit it on moodle.</li>
</ul>
<p><strong>Note :</strong> <u><a href="https://drive.google.com/file/d/1D4lEZg6LteCDtP0zCtM9_v2_VyerZadh/view?usp=share_link" target="_blank">Download this </a></u> Python file for checking the folder structure. The instructions for running the file are given in comments.</p>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="CS684_Assignment-1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="CS684_Assignment-3.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="CS684_Assignment-1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="CS684_Assignment-3.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
